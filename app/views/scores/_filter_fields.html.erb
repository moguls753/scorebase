<%# Shared filter fields for both mobile and desktop %>
<%# Params:
  - f: form builder
  - mobile: boolean (optional) - whether this is mobile layout
%>
<% mobile ||= false %>
<% grid_class = mobile ? "grid grid-cols-2 gap-3 mb-4" : "" %>

<div class="<%= grid_class %>">
  <!-- Filter: Period (most useful - musicians think in eras) -->
  <div class="<%= mobile ? '' : 'mb-4' %>">
    <%= f.label :period, t('filters.period'), class: "text-xs font-semibold text-[var(--color-text-muted)] #{mobile ? 'mb-1' : 'mb-2'} block uppercase tracking-wide" %>
    <%= f.select :period,
        options_for_select([
          [t('filters.any'), ''],
          [t('periods.medieval'), 'medieval'],
          [t('periods.renaissance'), 'renaissance'],
          [t('periods.baroque'), 'baroque'],
          [t('periods.classical'), 'classical'],
          [t('periods.romantic'), 'romantic'],
          [t('periods.modern'), 'modern']
        ], params[:period]),
        {},
        {
          class: "mm-input w-full text-xs",
          data: { action: mobile ? "change->filter-modal#closeAndSubmit" : "change->url-sync#submit" }
        }
    %>
  </div>

  <!-- Filter: Genre -->
  <div class="<%= mobile ? '' : 'mb-4' %>">
    <%= f.label :genre, t('filters.genre'), class: "text-xs font-semibold text-[var(--color-text-muted)] #{mobile ? 'mb-1' : 'mb-2'} block uppercase tracking-wide" %>
    <%= f.select :genre,
        options_for_select([
          [t('filters.any'), ''],
          [t('genres.sacred'), 'sacred'],
          [t('genres.classical'), 'classical'],
          [t('genres.folk'), 'folk'],
          [t('genres.soundtrack'), 'soundtrack'],
          [t('genres.jazz'), 'jazz'],
          [t('genres.rock'), 'rock'],
          [t('genres.pop'), 'pop']
        ], params[:genre]),
        {},
        {
          class: "mm-input w-full text-xs",
          data: { action: mobile ? "change->filter-modal#closeAndSubmit" : "change->url-sync#submit" }
        }
    %>
  </div>

  <!-- Filter: Forces (Voicing) - practical constraint -->
  <div class="<%= mobile ? '' : 'mb-4' %>">
    <%= f.label :voicing, t('filters.forces'), class: "text-xs font-semibold text-[var(--color-text-muted)] #{mobile ? 'mb-1' : 'mb-2'} block uppercase tracking-wide" %>
    <%= f.select :voicing,
        options_for_select([
          [t('filters.any'), ''],
          [t('forces.solo'), 'solo'],
          [t('forces.duet'), 'duet'],
          [t('forces.trio'), 'trio'],
          [t('forces.quartet'), 'quartet'],
          [t('forces.ensemble'), 'ensemble']
        ], params[:voicing]),
        {},
        {
          class: "mm-input w-full text-xs",
          data: { action: mobile ? "change->filter-modal#closeAndSubmit" : "change->url-sync#submit" }
        }
    %>
  </div>

  <!-- Filter: Voice Type (for choral music) -->
  <div class="<%= mobile ? '' : 'mb-4' %>">
    <%= f.label :voice_type, t('filters.voice_type'), class: "text-xs font-semibold text-[var(--color-text-muted)] #{mobile ? 'mb-1' : 'mb-2'} block uppercase tracking-wide" %>
    <%= f.select :voice_type,
        options_for_select([
          [t('filters.any'), ''],
          [t('voice_type.mixed'), 'mixed'],
          [t('voice_type.treble'), 'treble'],
          [t('voice_type.mens'), 'mens'],
          [t('voice_type.unison'), 'unison']
        ], params[:voice_type]),
        {},
        {
          class: "mm-input w-full text-xs",
          data: { action: mobile ? "change->filter-modal#closeAndSubmit" : "change->url-sync#submit" }
        }
    %>
  </div>

  <!-- Filter: Difficulty (AI-determined pedagogical grades) -->
  <div class="<%= mobile ? '' : 'mb-4' %>">
    <%= f.label :difficulty, t('filters.difficulty'), class: "text-xs font-semibold text-[var(--color-text-muted)] #{mobile ? 'mb-1' : 'mb-2'} block uppercase tracking-wide" %>
    <%= f.select :difficulty,
        options_for_select([
          [t('filters.any'), ''],
          [t('difficulty.beginner'), 'beginner'],
          [t('difficulty.elementary'), 'elementary'],
          [t('difficulty.intermediate'), 'intermediate'],
          [t('difficulty.advanced'), 'advanced'],
          [t('difficulty.expert'), 'expert']
        ], params[:difficulty]),
        {},
        {
          class: "mm-input w-full text-xs",
          data: { action: mobile ? "change->filter-modal#closeAndSubmit" : "change->url-sync#submit" }
        }
    %>
  </div>

  <!-- Filter: Language (for vocal music) -->
  <div class="<%= mobile ? '' : 'mb-5' %>">
    <%= f.label :language, t('filters.language'), class: "text-xs font-semibold text-[var(--color-text-muted)] #{mobile ? 'mb-1' : 'mb-2'} block uppercase tracking-wide" %>
    <%= f.select :language,
        options_for_select([
          [t('filters.any'), ''],
          [t('languages.latin'), 'Latin'],
          [t('languages.english'), 'English'],
          [t('languages.italian'), 'Italian'],
          [t('languages.german'), 'German'],
          [t('languages.french'), 'French'],
          [t('languages.spanish'), 'Spanish']
        ], params[:language]),
        {},
        {
          class: "mm-input w-full text-xs",
          data: { action: mobile ? "change->filter-modal#closeAndSubmit" : "change->url-sync#submit" }
        }
    %>
  </div>
</div>
