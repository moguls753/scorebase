<% content_for :title, @page_title %>

<!-- Hero Section -->
<section class="hub-hero py-8 sm:py-12 lg:py-16 border-b-2 border-[var(--color-border)]">
  <div class="max-w-7xl mx-auto px-4 sm:px-6">
    <nav class="flex items-center gap-2 text-xs font-medium text-[var(--color-text-muted)] mb-4">
      <%= link_to root_path, class: "hover:text-[var(--color-accent)] transition-colors" do %>ScoreBase<% end %>
      <span class="text-[var(--color-border-subtle)]">/</span>
      <%= link_to genres_path, class: "hover:text-[var(--color-accent)] transition-colors" do %><%= t('filters.genre') %><% end %>
      <span class="text-[var(--color-border-subtle)]">/</span>
      <span class="text-[var(--color-accent)]"><%= @genre_name %></span>
    </nav>

    <div class="flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4">
      <div>
        <h1 class="text-2xl sm:text-3xl lg:text-4xl font-[var(--font-family-display)] mb-2 leading-tight font-black uppercase tracking-tight hero-title">
          <%= @genre_name %>
        </h1>
        <p class="text-sm sm:text-base font-medium hero-subtitle">
          <span class="text-[var(--color-accent)] font-bold"><%= number_with_delimiter(@total_count) %></span>
          <%= t('search.results_count').downcase %>
        </p>
      </div>

      <%= form_with url: genre_path(slug: params[:slug]), method: :get, data: { turbo_frame: "scores" }, class: "w-full sm:w-auto" do |f| %>
        <div class="sort-control sort-control--anchored">
          <label for="sort" class="sort-label"><span class="sort-icon">â†•</span><span class="hidden xs:inline"><%= t('search.sort_by') %></span></label>
          <%= f.select :sort, [[t('sort.popular'), "popularity"], [t('sort.rated'), "rating"], [t('sort.newest'), "newest"], [t('sort.title'), "title"], [t('sort.composer'), "composer"]], { selected: @sort }, { class: "sort-select", id: "sort", onchange: "this.form.requestSubmit()" } %>
        </div>
      <% end %>
    </div>
  </div>
</section>

<!-- Scores Grid -->
<turbo-frame id="scores" data-turbo-action="advance">
<div class="max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-10">
  <% if @scores.any? %>
    <div class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-5 lg:gap-6">
      <% @scores.each do |score| %>
        <%= render 'score_card', score: score %>
      <% end %>
    </div>
    <%= render 'shared/pagination', scores: @scores, turbo_frame: 'scores' %>
  <% else %>
    <div class="mm-card p-8 sm:p-12 text-center">
      <div class="text-6xl mb-4 text-[var(--color-border-subtle)]">ðŸŽ¼</div>
      <p class="text-[var(--color-text-muted)] font-medium"><%= t('hub.no_scores_found') %></p>
    </div>
  <% end %>
</div>
</turbo-frame>

