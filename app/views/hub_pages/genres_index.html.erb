<% content_for :title, @page_title %>

<!-- Hero Section -->
<section class="hub-hero py-10 sm:py-14 lg:py-20 border-b-2 border-[var(--color-border)]">
  <div class="max-w-7xl mx-auto px-4 sm:px-6">
    <div class="max-w-3xl">
      <nav class="flex items-center gap-2 text-xs font-medium text-[var(--color-text-muted)] mb-4">
        <%= link_to root_path, class: "hover:text-[var(--color-accent)] transition-colors" do %>
          ScoreBase
        <% end %>
        <span class="text-[var(--color-border-subtle)]">/</span>
        <span class="text-[var(--color-accent)]"><%= t('filters.genre') %></span>
      </nav>

      <h1 class="text-3xl sm:text-4xl lg:text-5xl font-[var(--font-family-display)] mb-3 leading-tight font-black uppercase tracking-tight hero-title">
        <%= t('filters.genre') %>
      </h1>
      <p class="text-base sm:text-lg font-medium hero-subtitle">
        <%= t('hub.genres_description', count: @genres.size) %>
      </p>
    </div>
  </div>
</section>

<!-- Genres Grid -->
<div class="max-w-7xl mx-auto px-4 sm:px-6 py-8 sm:py-12">
  <% if @genres.any? %>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-5">
      <% @genres.each_with_index do |genre, i| %>
        <%= link_to genre_path(slug: genre[:slug]),
            class: "hub-card mm-card p-5 sm:p-6 group flex items-center gap-4",
            style: "animation-delay: #{i * 30}ms" do %>
          <!-- Genre Icon -->
          <div class="w-16 h-16 flex-shrink-0 flex items-center justify-center bg-[var(--color-bg)] border-2 border-[var(--color-border)] text-3xl">
            <% icon = case genre[:name].downcase
               when /classical|baroque|romantic/ then "ðŸŽ»"
               when /jazz/ then "ðŸŽ·"
               when /folk/ then "ðŸª•"
               when /rock|pop/ then "ðŸŽ¸"
               when /choral|sacred/ then "ðŸŽ¹"
               else "ðŸŽ¼"
               end %>
            <%= icon %>
          </div>

          <div class="flex-1 min-w-0">
            <h3 class="text-lg sm:text-xl font-[var(--font-family-display)] text-[var(--color-primary)] font-bold mb-1 group-hover:text-[var(--color-accent)] transition-colors">
              <%= genre[:name] %>
            </h3>
            <p class="text-sm text-[var(--color-text-muted)] font-semibold">
              <span class="text-[var(--color-accent)] font-bold"><%= number_with_delimiter(genre[:count]) %></span>
              <%= t('search.results_count').downcase %>
            </p>
          </div>

          <!-- Arrow -->
          <div class="text-[var(--color-border-subtle)] group-hover:text-[var(--color-accent)] group-hover:translate-x-1 transition-all">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"/>
            </svg>
          </div>
        <% end %>
      <% end %>
    </div>
  <% else %>
    <div class="mm-card p-8 sm:p-12 text-center">
      <div class="text-6xl mb-4 text-[var(--color-border-subtle)]">ðŸŽ¼</div>
      <p class="text-[var(--color-text-muted)] font-medium"><%= t('hub.no_scores_found') %></p>
    </div>
  <% end %>
</div>

<style>
  .hub-hero {
    background: linear-gradient(135deg, #ffffff 0%, #fefcf9 50%, #ffffff 100%);
  }
  [data-theme="dark"] .hub-hero {
    background: linear-gradient(135deg, #2a2520 0%, #1f1b18 50%, #2d2823 100%);
  }
  .hub-card {
    animation: hubCardFadeIn 0.4s ease both;
  }
  @keyframes hubCardFadeIn {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
  }
  /* Respect reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    .hub-card { animation: none; opacity: 1; }
  }
  /* Disable animations during Turbo cache preview to prevent double animation */
  html[data-turbo-preview] .hub-card {
    animation: none;
    opacity: 1;
    transform: none;
  }
</style>
