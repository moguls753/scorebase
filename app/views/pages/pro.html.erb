<% content_for :title, t('pro.meta_title') %>
<% content_for :meta_description, t('pro.meta_description', count: number_with_delimiter(@total_count)) %>
<% content_for :og_description, t('pro.og_description', count: number_with_delimiter(@total_count)) %>
<% content_for :json_ld do %>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "ScoreBase Smart Search",
    "url": "<%= request.base_url %><%= pro_landing_path %>",
    "applicationCategory": "MusicApplication",
    "operatingSystem": "Web",
    "offers": {
      "@type": "Offer",
      "price": "2.99",
      "priceCurrency": "USD",
      "availability": "https://schema.org/InStock",
      "priceValidUntil": "2026-12-31",
      "billingIncrement": "P1M",
      "url": "<%= request.base_url %><%= pro_landing_path %>"
    },
    "description": "Search <%= number_with_delimiter(@total_count) %> sheet music scores by difficulty, vocal range, duration, style, and mood. Natural language search.",
    "creator": {
      "@type": "Organization",
      "name": "ScoreBase"
    },
    "featureList": [
      "Natural language search",
      "Difficulty level filtering",
      "Vocal range filtering",
      "Duration-based search",
      "Style and mood search",
      "<%= number_with_delimiter(@total_count) %> scores"
    ]
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "<%= t('pro.faq_1_q') %>",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "<%= t('pro.faq_1_a') %>"
        }
      },
      {
        "@type": "Question",
        "name": "<%= t('pro.faq_2_q') %>",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "<%= t('pro.faq_2_a', count: number_with_delimiter(@total_count)) %>"
        }
      },
      {
        "@type": "Question",
        "name": "<%= t('pro.faq_3_q') %>",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "<%= t('pro.faq_3_a') %>"
        }
      },
      {
        "@type": "Question",
        "name": "<%= t('pro.faq_4_q') %>",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "<%= t('pro.faq_4_a') %>"
        }
      },
      {
        "@type": "Question",
        "name": "<%= t('pro.faq_5_q') %>",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "<%= t('pro.faq_5_a') %>"
        }
      }
    ]
  }
  </script>
<% end %>

<div data-controller="pro-landing">
  <!-- Hero -->
  <div class="pro-hero">
    <h1 class="pro-headline">
      <%= t('pro.hero_headline') %>
    </h1>

    <p class="pro-subhead">
      <%= t('pro.hero_subhead_live') %>
    </p>

    <% if pro_user? %>
      <div class="pro-hero-link">
        <%= link_to smart_search_path, class: "hero-text-link" do %>
          <%= t('pro.cta_open_search') %> <span class="hero-arrow">â†’</span>
        <% end %>
      </div>
    <% end %>
  </div>

  <!-- The Problem -->
  <div class="pro-section">
    <h2 class="pro-section-title">
      <%= t('pro.problem_title') %>
    </h2>

    <p class="pro-section-text">
      <%= t('pro.problem_p1') %>
    </p>

    <p class="pro-section-text">
      <%= t('pro.problem_p2') %>
    </p>

    <div class="comparison-grid">
      <div class="comparison-column comparison-bad">
        <h3><%= t('pro.comparison_bad_title') %></h3>
        <div class="query-example">
          <div class="query-example-text"><%= t('pro.comparison_bad_query') %></div>
        </div>
        <p class="comparison-desc">
          <%= t('pro.comparison_bad_desc') %>
        </p>
      </div>

      <div class="comparison-column comparison-good">
        <h3><%= t('pro.comparison_good_title') %></h3>
        <div class="query-example">
          <div class="query-example-text"><%= t('pro.comparison_good_query') %></div>
        </div>
        <p class="comparison-desc-good">
          <%= t('pro.comparison_good_desc') %>
        </p>
      </div>
    </div>
  </div>

  <div class="pro-divider"></div>

  <!-- The Solution -->
  <div class="pro-section pro-section-narrow">
    <h2 class="pro-section-title">
      <%= t('pro.solution_title') %>
    </h2>

    <p class="pro-section-text">
      <%= t('pro.solution_intro') %>
    </p>

    <div class="use-case" data-scroll-reveal data-pro-landing-target="reveal">
      <div class="use-case-title"><%= t('pro.use_case_teacher') %></div>
      <div class="use-case-query"><%= t('pro.use_case_teacher_query') %></div>
    </div>

    <div class="use-case" data-scroll-reveal data-pro-landing-target="reveal">
      <div class="use-case-title"><%= t('pro.use_case_director') %></div>
      <div class="use-case-query"><%= t('pro.use_case_director_query') %></div>
    </div>

    <div class="use-case" data-scroll-reveal data-pro-landing-target="reveal">
      <div class="use-case-title"><%= t('pro.use_case_amateur') %></div>
      <div class="use-case-query"><%= t('pro.use_case_amateur_query') %></div>
    </div>

    <div class="use-case" data-scroll-reveal data-pro-landing-target="reveal">
      <div class="use-case-title"><%= t('pro.use_case_student') %></div>
      <div class="use-case-query"><%= t('pro.use_case_student_query') %></div>
    </div>
  </div>

  <div class="pro-divider"></div>

  <!-- Pricing -->
  <div class="pro-section pro-section-narrow pricing-section-centered">
    <h2 class="pro-section-title-centered">
      <%= t('pro.pricing_title') %>
    </h2>

    <div class="price-badge"><%= t('pro.pricing_amount') %></div>
    <p class="pricing-period"><%= t('pro.pricing_period') %></p>

    <p class="pro-section-text-centered">
      <%= t('pro.pricing_desc', count: number_with_delimiter(@total_count)) %>
    </p>

    <div class="pricing-cta">
      <% if pro_user? %>
        <%= link_to t('pro.cta_open_search'), smart_search_path, class: "mm-button mm-button-primary" %>
      <% elsif authenticated? %>
        <%# TODO: Link to Stripe checkout when ready %>
        <span class="mm-button mm-button-secondary" style="opacity: 0.6; cursor: not-allowed;">
          <%= t('pro.cta_subscribe') %>
        </span>
      <% else %>
        <%= link_to t('pro.cta_subscribe'), new_user_path, class: "mm-button mm-button-primary" %>
        <p class="pricing-login-hint">
          <%= t('pro.already_member') %> <%= link_to t('pro.sign_in'), new_session_path %>
        </p>
      <% end %>
    </div>
  </div>

  <div class="pro-divider"></div>

  <!-- FAQ -->
  <div class="pro-section pro-section-narrow" data-controller="faq-accordion">
    <h2 class="pro-section-title-faq">
      <%= t('pro.faq_title') %>
    </h2>

    <div class="faq-item" data-scroll-reveal data-pro-landing-target="reveal" data-faq-accordion-target="item">
      <button type="button" class="faq-q" data-action="click->faq-accordion#toggle" aria-expanded="false">
        <span><%= t('pro.faq_1_q') %></span>
        <span class="faq-toggle" aria-hidden="true">+</span>
      </button>
      <div class="faq-a"><%= t('pro.faq_1_a') %></div>
    </div>

    <div class="faq-item" data-scroll-reveal data-pro-landing-target="reveal" data-faq-accordion-target="item">
      <button type="button" class="faq-q" data-action="click->faq-accordion#toggle" aria-expanded="false">
        <span><%= t('pro.faq_2_q') %></span>
        <span class="faq-toggle" aria-hidden="true">+</span>
      </button>
      <div class="faq-a"><%= t('pro.faq_2_a', count: number_with_delimiter(@total_count)) %></div>
    </div>

    <div class="faq-item" data-scroll-reveal data-pro-landing-target="reveal" data-faq-accordion-target="item">
      <button type="button" class="faq-q" data-action="click->faq-accordion#toggle" aria-expanded="false">
        <span><%= t('pro.faq_3_q') %></span>
        <span class="faq-toggle" aria-hidden="true">+</span>
      </button>
      <div class="faq-a"><%= t('pro.faq_3_a') %></div>
    </div>

    <div class="faq-item" data-scroll-reveal data-pro-landing-target="reveal" data-faq-accordion-target="item">
      <button type="button" class="faq-q" data-action="click->faq-accordion#toggle" aria-expanded="false">
        <span><%= t('pro.faq_4_q') %></span>
        <span class="faq-toggle" aria-hidden="true">+</span>
      </button>
      <div class="faq-a"><%= t('pro.faq_4_a') %></div>
    </div>

    <div class="faq-item" data-scroll-reveal data-pro-landing-target="reveal" data-faq-accordion-target="item">
      <button type="button" class="faq-q" data-action="click->faq-accordion#toggle" aria-expanded="false">
        <span><%= t('pro.faq_5_q') %></span>
        <span class="faq-toggle" aria-hidden="true">+</span>
      </button>
      <div class="faq-a"><%= t('pro.faq_5_a') %></div>
    </div>
  </div>

  <!-- Back to browsing -->
  <div class="pro-section back-to-browsing">
    <%= link_to t('pro.back_to_catalog'), root_path, class: "mm-button mm-button-secondary" %>
  </div>
</div>
